{"last_node_id":80,"last_link_id":139,"nodes":[{"id":18,"type":"FaceRestoreModelLoader","pos":[702,-1249],"size":{"0":315,"1":58},"flags":{},"order":0,"mode":0,"outputs":[{"name":"FACERESTORE_MODEL","type":"FACERESTORE_MODEL","links":[21],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"FaceRestoreModelLoader"},"widgets_values":["GFPGANv1.4.pth"]},{"id":60,"type":"MaskToImage","pos":[1488,-1502],"size":{"0":210,"1":26},"flags":{},"order":15,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":116}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":70,"type":"GroundingDinoModelLoader (segment anything)","pos":[715,-1363],"size":{"0":315,"1":58},"flags":{},"order":1,"mode":0,"outputs":[{"name":"GROUNDING_DINO_MODEL","type":"GROUNDING_DINO_MODEL","links":[114],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"GroundingDinoModelLoader (segment anything)"},"widgets_values":["GroundingDINO_SwinT_OGC (694MB)"]},{"id":59,"type":"PreviewImage","pos":[1514,-1795],"size":{"0":210,"1":246},"flags":{},"order":14,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":112}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":71,"type":"SAMModelLoader (segment anything)","pos":[689,-1533],"size":{"0":315,"1":58},"flags":{},"order":2,"mode":0,"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[113],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SAMModelLoader (segment anything)"},"widgets_values":["sam_vit_l (1.25GB)"]},{"id":75,"type":"InstantIDModelLoader","pos":[2259,-1754],"size":{"0":315,"1":58},"flags":{},"order":3,"mode":0,"outputs":[{"name":"INSTANTID","type":"INSTANTID","links":[121],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"InstantIDModelLoader"},"widgets_values":["ip-adapter.bin"]},{"id":76,"type":"InstantIDFaceAnalysis","pos":[2262,-1640],"size":{"0":315,"1":58},"flags":{},"order":4,"mode":0,"outputs":[{"name":"FACEANALYSIS","type":"FACEANALYSIS","links":[122],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"InstantIDFaceAnalysis"},"widgets_values":["CPU"]},{"id":2,"type":"LoadImage","pos":[709,-780],"size":{"0":315,"1":314},"flags":{},"order":5,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[2,123],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["赵本山.jpg","image"]},{"id":64,"type":"CLIPTextEncode","pos":[1826,-904],"size":[400,200],"flags":{},"order":10,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":91}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[125],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["1man, look at viewer"]},{"id":65,"type":"CLIPTextEncode","pos":[1830,-655],"size":{"0":400,"1":200},"flags":{},"order":11,"mode":0,"inputs":[{"name":"clip","type":"CLIP","link":93}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[126],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":[""]},{"id":77,"type":"ApplyInstantIDAdvanced","pos":[2722.1508036445675,-1697.554753314068],"size":{"0":315,"1":290},"flags":{},"order":13,"mode":0,"inputs":[{"name":"instantid","type":"INSTANTID","link":121},{"name":"insightface","type":"FACEANALYSIS","link":122},{"name":"control_net","type":"CONTROL_NET","link":130},{"name":"image","type":"IMAGE","link":123},{"name":"model","type":"MODEL","link":131},{"name":"positive","type":"CONDITIONING","link":125},{"name":"negative","type":"CONDITIONING","link":126},{"name":"image_kps","type":"IMAGE","link":124},{"name":"mask","type":"MASK","link":null}],"outputs":[{"name":"MODEL","type":"MODEL","links":[129],"shape":3,"slot_index":0},{"name":"POSITIVE","type":"CONDITIONING","links":[127],"shape":3,"slot_index":1},{"name":"NEGATIVE","type":"CONDITIONING","links":[128],"shape":3,"slot_index":2}],"properties":{"Node name for S&R":"ApplyInstantIDAdvanced"},"widgets_values":[0.8,0.8,0,1]},{"id":78,"type":"ControlNetLoader","pos":[2662.2405868097494,-1975.7600484073532],"size":{"0":315,"1":58},"flags":{},"order":6,"mode":0,"outputs":[{"name":"CONTROL_NET","type":"CONTROL_NET","links":[130],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"ControlNetLoader"},"widgets_values":["ControlNetModel/diffusion_pytorch_model.safetensors"]},{"id":68,"type":"VAEEncodeForInpaint","pos":[1924,-1047],"size":{"0":315,"1":98},"flags":{},"order":16,"mode":0,"inputs":[{"name":"pixels","type":"IMAGE","link":136},{"name":"vae","type":"VAE","link":103},{"name":"mask","type":"MASK","link":117}],"outputs":[{"name":"LATENT","type":"LATENT","links":[104],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEEncodeForInpaint"},"widgets_values":[8]},{"id":56,"type":"CheckpointLoaderSimple","pos":[1765,-1200],"size":{"0":315,"1":98},"flags":{},"order":7,"mode":0,"outputs":[{"name":"MODEL","type":"MODEL","links":[131],"shape":3,"slot_index":0},{"name":"CLIP","type":"CLIP","links":[91,93],"shape":3,"slot_index":1},{"name":"VAE","type":"VAE","links":[97,103],"shape":3,"slot_index":2}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["XL/realvisxlV30_v30Bakedvae.safetensors"]},{"id":57,"type":"Image2Text","pos":[2085,-1454],"size":{"0":400,"1":200},"flags":{},"order":23,"mode":0,"inputs":[{"name":"model","type":"IMAGE2TEXT_MODEL","link":86},{"name":"image","type":"IMAGE","link":87}],"outputs":[{"name":"STRING","type":"STRING","links":[],"shape":6,"slot_index":0}],"properties":{"Node name for S&R":"Image2Text"},"widgets_values":["Please describe this image in detail.",""]},{"id":58,"type":"LoadImage2TextModel","pos":[1740,-1464],"size":{"0":315,"1":106},"flags":{},"order":8,"mode":0,"outputs":[{"name":"IMAGE2TEXT_MODEL","type":"IMAGE2TEXT_MODEL","links":[86],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"LoadImage2TextModel"},"widgets_values":["moondream1","cuda",false]},{"id":69,"type":"GroundingDinoSAMSegment (segment anything)","pos":[1076,-1533],"size":{"0":330,"1":122},"flags":{},"order":12,"mode":0,"inputs":[{"name":"sam_model","type":"SAM_MODEL","link":113},{"name":"grounding_dino_model","type":"GROUNDING_DINO_MODEL","link":114},{"name":"image","type":"IMAGE","link":135}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[112],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":[116,117],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"GroundingDinoSAMSegment (segment anything)"},"widgets_values":["face",0.3]},{"id":61,"type":"KSamplerAdvanced","pos":[2590,-1052],"size":{"0":315,"1":334},"flags":{},"order":17,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":129},{"name":"positive","type":"CONDITIONING","link":127},{"name":"negative","type":"CONDITIONING","link":128},{"name":"latent_image","type":"LATENT","link":104}],"outputs":[{"name":"LATENT","type":"LATENT","links":[96],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"KSamplerAdvanced"},"widgets_values":["enable",12060837449183,"fixed",20,2,"ddim","ddim_uniform",0,10000,"disable"]},{"id":44,"type":"LoadImage","pos":[666,-1134],"size":{"0":315,"1":314},"flags":{},"order":9,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[124,135,136],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["WechatIMG102904 (3).jpeg","image"]},{"id":67,"type":"VAEDecode","pos":[2814,-1251],"size":{"0":210,"1":46},"flags":{},"order":18,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":96},{"name":"vae","type":"VAE","link":97}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[99,137],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"}},{"id":55,"type":"Image Save","pos":[1417,-1063],"size":{"0":315,"1":558},"flags":{},"order":22,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":83}],"properties":{"Node name for S&R":"Image Save"},"widgets_values":["[time(%Y-%m-%d)]","swap_face","_",4,"false","jpg",100,"false","false","false","true","true","true"]},{"id":1,"type":"ReActorFaceSwap","pos":[1041,-1053],"size":{"0":315,"1":338},"flags":{},"order":20,"mode":0,"inputs":[{"name":"input_image","type":"IMAGE","link":137},{"name":"source_image","type":"IMAGE","link":2},{"name":"face_model","type":"FACE_MODEL","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[23],"shape":3,"slot_index":0},{"name":"FACE_MODEL","type":"FACE_MODEL","links":null,"shape":3}],"properties":{"Node name for S&R":"ReActorFaceSwap"},"widgets_values":[true,"inswapper_128.onnx","retinaface_resnet50","none",1,0.5,"no","no","0","0",1]},{"id":17,"type":"FaceRestoreCFWithModel","pos":[1052,-1239],"size":{"0":315,"1":102},"flags":{},"order":21,"mode":0,"inputs":[{"name":"facerestore_model","type":"FACERESTORE_MODEL","link":21},{"name":"image","type":"IMAGE","link":23}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[83,87,139],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"FaceRestoreCFWithModel"},"widgets_values":["retinaface_resnet50",0.5]},{"id":80,"type":"PreviewImage","pos":[171,-1122],"size":{"0":462.78369140625,"1":650.703369140625},"flags":{},"order":24,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":139}],"properties":{"Node name for S&R":"PreviewImage"}},{"id":66,"type":"PreviewImage","pos":[-329,-1117],"size":[462.7836973613471,650.7033644608932],"flags":{},"order":19,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":99}],"properties":{"Node name for S&R":"PreviewImage"}}],"links":[[2,2,0,1,1,"IMAGE"],[21,18,0,17,0,"FACERESTORE_MODEL"],[23,1,0,17,1,"IMAGE"],[83,17,0,55,0,"IMAGE"],[86,58,0,57,0,"IMAGE2TEXT_MODEL"],[87,17,0,57,1,"IMAGE"],[91,56,1,64,0,"CLIP"],[93,56,1,65,0,"CLIP"],[96,61,0,67,0,"LATENT"],[97,56,2,67,1,"VAE"],[99,67,0,66,0,"IMAGE"],[103,56,2,68,1,"VAE"],[104,68,0,61,3,"LATENT"],[112,69,0,59,0,"IMAGE"],[113,71,0,69,0,"SAM_MODEL"],[114,70,0,69,1,"GROUNDING_DINO_MODEL"],[116,69,1,60,0,"MASK"],[117,69,1,68,2,"MASK"],[121,75,0,77,0,"INSTANTID"],[122,76,0,77,1,"FACEANALYSIS"],[123,2,0,77,3,"IMAGE"],[124,44,0,77,7,"IMAGE"],[125,64,0,77,5,"CONDITIONING"],[126,65,0,77,6,"CONDITIONING"],[127,77,1,61,1,"CONDITIONING"],[128,77,2,61,2,"CONDITIONING"],[129,77,0,61,0,"MODEL"],[130,78,0,77,2,"CONTROL_NET"],[131,56,0,77,4,"MODEL"],[135,44,0,69,2,"IMAGE"],[136,44,0,68,0,"IMAGE"],[137,67,0,1,0,"IMAGE"],[139,17,0,80,0,"IMAGE"]],"groups":[],"config":{},"extra":{},"version":0.4}